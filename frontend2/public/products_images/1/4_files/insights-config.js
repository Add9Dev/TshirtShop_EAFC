!function(){function t(e){return t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},t(e)}function e(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=r){var n,a,o,i,c=[],u=!0,l=!1;try{if(o=(r=r.call(t)).next,0===e){if(Object(r)!==r)return;u=!1}else for(;!(u=(n=o.call(r)).done)&&(c.push(n.value),c.length!==e);u=!0);}catch(t){l=!0,a=t}finally{try{if(!u&&null!=r.return&&(i=r.return(),Object(i)!==i))return}finally{if(l)throw a}}return c}}(t,e)||function(t,e){if(t){if("string"==typeof t)return r(t,e);var n={}.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?r(t,e):void 0}}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function r(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=Array(e);r<e;r++)n[r]=t[r];return n}window.enableInsights=function(r,n,a){var o,i,c="algolia-insights",u=document.querySelector("#algolia-insights"),l=!1,s={},d=document.cookie.match(/dwanonymous_\w*=(\w*);/);if(d&&(o=d[1]),u&&"true"===u.dataset.userauthenticated&&(i=u.dataset.usertoken),u&&"true"===u.dataset.trackingallowed){l=!0;try{s=JSON.parse(localStorage.getItem(c)||"{}")}catch(t){localStorage.removeItem(c)}}else localStorage.removeItem(c);window.aa("init",{appId:r,apiKey:n,userToken:o,authenticatedUserToken:i});var f=[],p=null;$(document).on("updateAddToCartFormData",(function(t,e){f=e.pidsObj?JSON.parse(e.pidsObj):[{pid:e.pid,qty:e.quantity,vgId:e.vgId}]})),$("body").on("product:afterAddToCart",(function(r,n){var o,i,u=function(t){for(var e,r=window.location.search.substring(1).split("&"),n=0;n<r.length;n++)if((e=r[n].split("="))[0]===t)return void 0===e[1]||decodeURIComponent(e[1]);return null}("source"),d={};if(f.forEach((function(t){Object.keys(n.cart.items).forEach((function(e){var r=n.cart.items[e].find((function(e){return e.id===t.pid}));if(r){d[e]||(d[e]=[]);var a={queryID:o=p||("algolia"===u?localStorage.getItem("lastQueryID_"+e):null),price:r.price.sales.value,quantity:parseInt(t.qty,10)};r.price.list&&(a.discount=+(r.price.list.value-r.price.sales.value).toFixed(2)),i=r.price.sales.currency,d[e].push({id:r.trackingProductID,info:a}),l&&(s[r.trackingProductID]=o)}}))})),l){var y=function(t){Object.values(n.cart.items||[]).flat().some((function(e){return e.trackingProductID===t}))||delete s[t]};for(var m in s)y(m);localStorage.setItem(c,JSON.stringify(s))}var v=o?"addedToCartObjectIDsAfterSearch":"addedToCartObjectIDs",b=n.pliUUID?"Product Add to cart":"Global Add to cart";Object.entries(d).forEach((function(r){var n,o=e(r,2),c=o[0],u=o[1],l=u.map((function(t){return""+t.id})),s=u.map((function(t){return t.info}));if(a&&"object"===t(a)&&a[c]){n=a[c];var d={eventName:b,index:n,objectIDs:l,objectData:s,currency:i};window.aa(v,d)}else console.error("No index found for brand: ".concat(c))}))}));var y=document.querySelector(".ais-InstantSearch");y&&y.addEventListener("click",(function(t){var e=function(t,e){for(var r=t;r&&!r.hasAttribute("data-query-id");){if(r===e)return null;r=r.parentElement}return r}(t.target,t.currentTarget),r=$(".js-page").data("brand");e&&(p=$(e).data("query-id"),localStorage.setItem("lastQueryID_"+r,p))}));var m=u&&u.dataset.order,v=null;try{v=m?JSON.parse(m):null}catch(t){v=null}v&&Object.entries(v).forEach((function(t){var r,n=e(t,2),o=n[0],i=n[1],u=[],d=[];i.forEach((function(t){var e={price:t.price.sales.value,quantity:t.quantity};t.price.list&&(e.discount=+(t.price.list.value-t.price.sales.value).toFixed(2)),l&&(e.queryID=s[t.id],delete s[t.id]),r=t.price.sales.currency,u.push(t.id),d.push(e)})),l&&localStorage.setItem(c,JSON.stringify(s));var f=a[o.toUpperCase()];if(f){var p={eventName:"Products purchased",index:f,objectIDs:u,objectData:d,currency:r},y=l?"purchasedObjectIDsAfterSearch":"purchasedObjectIDs";window.aa(y,p)}else console.error("No matching index found for brand: ".concat(o))}))}}();